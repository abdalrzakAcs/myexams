<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>Ø¥Ø¯Ø§Ø±Ø© Ù…Ù‡Ø§Ù… My Exams</title>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet" />
  <style>
    table {
  width: 100%;
  min-width: 1250px;
  border-collapse: collapse;
  background: var(--card-bg);
  border-radius: 20px;
  overflow: hidden;
  box-shadow: var(--shadow);
  table-layout: fixed; /* ğŸ” Ø£Ø¶Ù Ù‡Ø°Ø§ Ø§Ù„Ø³Ø·Ø± */
}

    :root {
      --primary: #0069d9;
      --primary-hover: #0053b3;
      --light-bg: #f5f7fa;
      --card-bg: #ffffff;
      --border: #dfe3e8;
      --text-dark: #212529;
      --shadow: 0 6px 24px rgba(0,0,0,0.08);
      --danger: #dc3545;
    }
    * { box-sizing: border-box; font-family: "Cairo", sans-serif; transition: all .3s ease; }
    body { margin: 0; padding: 32px 16px; background: var(--light-bg); color: var(--text-dark); }
    h2 { text-align: center; margin-bottom: 32px; font-weight: 700; font-size: 2.2rem; color: var(--primary); text-shadow: 0 2px 4px rgba(0,0,0,0.1); }

    .login-box { max-width: 420px; margin: 0 auto 40px; background: #fff; padding: 28px; border-radius: 20px; box-shadow: var(--shadow); text-align: center; }
    .login-box input { width: 100%; padding: 14px; margin: 12px 0; border: 1px solid var(--border); border-radius: 10px; font-size: 1rem; }
    .login-box button { background: var(--primary); color: #fff; border: none; padding: 12px 26px; border-radius: 12px; font-size: 1.1rem; font-weight: 700; cursor: pointer; box-shadow: 0 3px 12px rgba(0,105,217,0.3); }
    .login-box button:hover { background: var(--primary-hover); transform: scale(1.05); }

    #taskForm { display: none; grid-template-columns: repeat(auto-fill,minmax(220px,1fr)); gap: 20px; max-width: 1150px; margin: 0 auto; background: var(--card-bg); padding: 36px; border-radius: 20px; box-shadow: var(--shadow); align-items: end; }
    #taskForm label { display: flex; flex-direction: column; font-weight: 600; gap: 8px; }
    #taskForm input, #taskForm button { padding: 14px 16px; border: 1px solid var(--border); border-radius: 12px; font-size: 1rem; }
    #taskForm button { background: var(--primary); color: #fff; font-weight: 700; cursor: pointer; }
    #taskForm button:hover { background: var(--primary-hover); transform: scale(1.04); }

    .table-wrapper { max-width: 100%; overflow-x: auto; margin-top: 48px; }
    table { width: 100%; min-width: 1250px; border-collapse: collapse; background: var(--card-bg); border-radius: 20px; overflow: hidden; box-shadow: var(--shadow); }
    thead th { position: sticky; top: 0; background: #e9ecef; font-weight: bold; font-size: 1rem; padding: 16px 0; }
    th,td { padding: 14px 12px; border: 1px solid var(--border); text-align: center; font-size: 0.9rem; }
    tr:nth-child(even) { background: #fdfdfd; }
    tr:hover { background: #f1f5f8; }

    .accounting-row td { background-color: #fef9e7; font-weight: bold; }

    .total-summary { margin-top: 20px; max-width: 1150px; background: #fff; padding: 20px; border-radius: 16px; box-shadow: var(--shadow); font-size: 1.1rem; }
  </style>
</head>
<body>
   <div style="text-align:center; margin-bottom: 20px; font-family: 'Cairo', sans-serif;">
  <p style="font-size: 1.8rem; font-weight: bold; color: #0069d9; margin: 0; text-shadow: 0 2px 4px rgba(0,0,0,0.1);">
    Ø¨ÙØ³Ù’Ù…Ù Ø§Ù„Ù„Ù‡Ù Ø§Ù„Ø±ÙÙ‘Ø­Ù’Ù…Ù°Ù†Ù Ø§Ù„Ø±ÙÙ‘Ø­ÙÙŠÙ…Ù
  </p>
</div>



  <h2>Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù‡Ø§Ù… Ù„Ù…Ø´Ø±ÙˆØ¹ My Exams</h2>
  <div class="login-box" id="loginBox">
    <input type="password" id="adminPass" placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" />
    <button onclick="checkLogin()">Ø¯Ø®ÙˆÙ„</button>
  </div>

 <form id="taskForm">
  <label class="priority-wrap"><input type="checkbox" id="priorityFlag" /> Ø£ÙˆÙ„ÙˆÙŠØ©</label>
  <label>Ø±Ù‚Ù… Ø§Ù„Ù…Ø­Ø§Ø¶Ø±Ø©<input type="text" id="sessionNumber" required /></label>
  <label>Ø§Ø³Ù… Ø§Ù„Ø£Ø³ØªØ§Ø°<input type="text" id="teacherName" required /></label>
  <label>ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØµÙˆÙŠØ±<input type="date" id="recordDate" required /></label>
  <button type="submit">Ø¥Ø¶Ø§ÙØ©</button>
</form>


  <div class="table-wrapper">
    <table id="taskTable">
<thead>
  <tr>
    <th>Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©</th>
    <th>Ø±Ù‚Ù… Ø§Ù„Ù…Ø­Ø§Ø¶Ø±Ø©</th>
    <th>Ø§Ø³Ù… Ø§Ù„Ø£Ø³ØªØ§Ø°</th>
    <th>ØªÙ†Ø³ÙŠÙ‚</th><th>Ø§Ø³Ù… Ø§Ù„Ù…Ù†Ø³Ù‚</th>
    <th>Ø±ÙØ¹</th><th>Ø§Ø³Ù… Ø§Ù„Ø±Ø§ÙØ¹</th>
    <th>Ø¥Ø¯Ø®Ø§Ù„ Ù…Ù„Ù</th><th>Ø§Ø³Ù… Ø§Ù„Ù…Ø¯Ø®Ù„</th>
    <th>Ø±ÙØ¹ Ø£Ø³Ø¦Ù„Ø©</th><th>Ø§Ø³Ù… Ø§Ù„Ø±Ø§ÙØ¹</th>
    <th>Ø¥Ø¯Ø®Ø§Ù„ Ø£Ø³Ø¦Ù„Ø©</th><th>Ø§Ø³Ù… Ø§Ù„Ù…Ø¯Ø®Ù„</th>
    <th>ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØµÙˆÙŠØ±</th><th>Ø§Ø³Ù… Ø§Ù„Ù…ØµÙˆØ±</th>
    <th>Ù…ÙˆÙ†ØªØ§Ø¬</th><th>Ø§Ø³Ù… Ø§Ù„Ù…Ù…Ù†ØªØ¬</th>
    <th>Ø¥Ø¯Ø®Ø§Ù„ ÙÙŠØ¯ÙŠÙˆ</th><th>Ø§Ø³Ù… Ø§Ù„Ù…Ø¯Ø®Ù„</th>
    <th>Ø§Ù„Ù†Ø´Ø± ØªØµÙ…ÙŠÙ… Ø§Ù„Ø¨ÙˆØ³Øª Ù…Ø¹ Ø§Ù„ÙƒØªØ§Ø¨Ø©</th><th>Ø§Ø³Ù… Ø§Ù„ÙƒØ§ØªØ¨</th>
    <th>ØªØ³ÙˆÙŠÙ‚ ÙˆØ­Ù…Ù„Ø§Øª Ø¥Ø¹Ù„Ø§Ù†ÙŠØ© Ù…Ø¹ÙŠÙ†Ø©</th>
    <th>Ø§Ù„ÙƒÙ„ÙØ© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©</th>
    <th>Ø­Ø°Ù</th>
  </tr>
</thead>


      <tbody id="tableBody"></tbody>
    </table>
  </div>

  <div class="total-summary" id="summaryBox" style="display:none">
    ğŸ’° <strong>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙƒÙ„ÙØ©:</strong> <span id="totalCost">0</span> Ù„.Ø³
  </div>

  <script>
    const PASSWORDS={admin:"admin123",accountant:"account123"};
    let currentRole="guest";

    function checkLogin(){
      const pass=document.getElementById("adminPass").value.trim();
      if(pass===PASSWORDS.admin) currentRole="admin";
      else if(pass===PASSWORDS.accountant) currentRole="accountant";
      else return alert("ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©");
      document.getElementById("loginBox").style.display="none";
      if(currentRole==="admin") document.getElementById("taskForm").style.display="grid";
      document.getElementById("summaryBox").style.display="block";
      calculateSummary();
    }

    document.getElementById("taskForm").addEventListener("submit",e=>{
      e.preventDefault();
      const priority=document.getElementById("priorityFlag").checked?"âœ…":"âŒ";
      const num=document.getElementById("sessionNumber").value.trim();
      const teacher=document.getElementById("teacherName").value.trim();
      const date=document.getElementById("recordDate").value;
      addLectureRow(priority,num,teacher,date);
      document.getElementById("taskForm").reset();
      sortTable();
    });
function addLectureRow(priority, num, teacher, date) {
  const tableBody = document.getElementById("tableBody");
  const mainRow   = document.createElement("tr");
  const costRow   = document.createElement("tr");
  costRow.classList.add("accounting-row");

  // ğŸŸ¡ 1. Ø®Ø§Ù†Ø© Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©
  const priorityCell = document.createElement("td");
  priorityCell.textContent = priority;
  mainRow.appendChild(priorityCell);

  // ğŸŸ¡ 2. Ø±Ù‚Ù… Ø§Ù„Ù…Ø­Ø§Ø¶Ø±Ø© + Ø§Ø³Ù… Ø§Ù„Ø£Ø³ØªØ§Ø°
  [num, teacher].forEach(val => {
    const td = document.createElement("td");
    td.textContent = val;
    mainRow.appendChild(td);
  });

  // ğŸŸ¡ 3. 19 Ø®Ø§Ù†Ø© Ù…Ù‡Ø§Ù… (ØµÙ Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ ÙÙ‚Ø·)
  for (let i = 0; i < 19; i++) {
    const td = document.createElement("td");
    td.contentEditable = true;
    td.style.direction = "rtl";
    mainRow.appendChild(td);
  }

  // ğŸŸ¡ 4. Ø§Ù„ÙƒÙ„ÙØ© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©
  const totalMain = document.createElement("td");
  mainRow.appendChild(totalMain);

  // ğŸŸ¡ 5. Ø§Ù„Ø­Ø°Ù
  const deleteCell = document.createElement("td");
  deleteCell.innerHTML =
    "<span style='cursor:pointer;color:var(--danger);font-weight:bold;font-size:1.2rem;'>âœ–</span>";
  deleteCell.onclick = () => {
    mainRow.remove();
    costRow.remove();
    calculateSummary();
  };
  mainRow.appendChild(deleteCell);

  // ğŸŸ¡ 6. ØµÙ Ø§Ù„ÙƒÙ„Ù Ø§Ù„Ù…Ø­Ø§Ø³Ø¨ÙŠØ©
  for (let i = 0; i < 3; i++) costRow.appendChild(document.createElement("td")); // Ø£ÙˆÙ„ÙˆÙŠØ© + Ø±Ù‚Ù… + Ø£Ø³ØªØ§Ø°

  for (let i = 0; i < 19; i++) {
    const td = document.createElement("td");
    td.contentEditable = true;
    td.style.direction = "rtl";
    td.classList.add("cost-input"); // â­ï¸ Ù…ÙŠØ²Ø© Ø®Ø§ØµØ© Ø­ØªÙ‰ Ù†Ø­Ø³Ø¨ Ø¨Ø³ Ù‡Ø§ÙŠ Ø§Ù„Ø®Ù„Ø§ÙŠØ§
    td.addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        e.preventDefault(); // Ø­ØªÙ‰ Ù…Ø§ ÙŠÙ†Ø²Ù„ Ø³Ø·Ø± Ø¬Ø¯ÙŠØ¯
        updateRowTotal(costRow, totalMain);
      }
    });
    costRow.appendChild(td);
  }

  const totalCell = document.createElement("td"); // Ø§Ù„ÙƒÙ„ÙØ©
  totalCell.classList.add("total-cell");
  costRow.appendChild(totalCell);

  costRow.appendChild(document.createElement("td")); // Ø§Ù„Ø­Ø°Ù (ÙØ§Ø±Øº)

  tableBody.appendChild(mainRow);
  tableBody.appendChild(costRow);
}



 const deleteCell = document.createElement("td");
      deleteCell.innerHTML = "<span style='cursor:pointer;color:#dc3545;font-weight:bold;font-size:1.2rem;'>âœ–</span>";
      deleteCell.onclick = () => {
        mainRow.remove();
        costRow.remove();
        calculateSummary();
      };
function updateRowTotal(costRow){
  let sum = 0;

  // Ù†Ø¬Ù…Ø¹ ÙÙ‚Ø· Ø®Ù„Ø§ÙŠØ§ Ø§Ù„ÙƒÙ„ÙØ©
  costRow.querySelectorAll("td.cost-input").forEach(c => {
    const v = parseFloat(c.textContent.replace(/,/g, "").trim());
    if (!isNaN(v)) sum += v;
  });

  const totalCell = costRow.querySelector(".total-cell");
  totalCell.textContent = sum ? sum.toLocaleString() : "";

  calculateSummary();
}



    function calculateSummary(){
      let total=0;
      document.querySelectorAll(".total-cell").forEach(c=>{const v=parseFloat(c.textContent.replace(/,/g,""));if(!isNaN(v)) total+=v;});
      document.getElementById("totalCost").textContent=total.toLocaleString();
    }

function sortTable(){
  const body=document.getElementById("tableBody");
  const pairs=[];
  for(let i=0;i<body.children.length;i+=2){
    const main=body.children[i];
    const cost=body.children[i+1];
    const priority=main.children[0].textContent==="âœ…"?0:1;
    const date=new Date(main.children[12].textContent||"2100-01-01").getTime(); // Ø¹Ù…ÙˆØ¯ Ø§Ù„ØªØ§Ø±ÙŠØ®
    pairs.push({main,cost,priority,date});
  }
  pairs.sort((a,b)=>a.priority-b.priority||a.date-b.date);
  pairs.forEach(p=>{body.appendChild(p.main);body.appendChild(p.cost);});
}

        document.addEventListener("contextmenu", (e) => {
      if (!e.target.isContentEditable) return;
      e.preventDefault();
      const cell = e.target;
      const colors = ["transparent", "#fff9c4", "#ffe082", "#c8e6c9", "#212121"];
      const names = ["Ø´ÙØ§Ù", "Ø£ØµÙØ± ÙØ§ØªØ­", "Ø£ØµÙØ± ØºØ§Ù…Ù‚", "Ø£Ø®Ø¶Ø±", "Ø£Ø³ÙˆØ¯"];

      const menu = document.createElement("div");
      menu.style.position = "fixed";
      menu.style.top = `${e.clientY}px`;
      menu.style.left = `${e.clientX}px`;
      menu.style.background = "#fff";
      menu.style.border = "1px solid #ccc";
      menu.style.borderRadius = "8px";
      menu.style.boxShadow = "0 4px 12px rgba(0,0,0,0.15)";
      menu.style.zIndex = 1000;
      menu.style.padding = "6px 0";
      menu.style.minWidth = "140px";

      colors.forEach((color, i) => {
        const option = document.createElement("div");
        option.textContent = names[i];
        option.style.padding = "10px 16px";
        option.style.cursor = "pointer";
        option.style.backgroundColor = color === "transparent" ? "#fff" : color;
        option.style.color = color === "#212121" ? "#fff" : "#000";
        option.addEventListener("click", () => {
          cell.style.backgroundColor = color;
          document.body.removeChild(menu);
        });
        menu.appendChild(option);
      });

      document.querySelectorAll("body > .context-menu-color").forEach(m => m.remove());
      menu.classList.add("context-menu-color");
      document.body.appendChild(menu);

      document.addEventListener("click", () => {
        if (document.body.contains(menu)) document.body.removeChild(menu);
      }, { once: true });
    });
  </script>
</body>
</html>
